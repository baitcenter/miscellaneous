!(function(e, n) {
  var i,
    o,
    t,
    a,
    r = n.innerWidth,
    s = n.innerHeight,
    p = [],
    d = 0,
    c = 0,
    l = new Image(),
    m = null,
    E = 200
  function h() {
    ;((i = e.createElement('div')).className = 'snow'),
      e.querySelector('#container').appendChild(i),
      ((o = new THREE.PerspectiveCamera(75, r / s, 1, 1e4)).position.z = 1e3),
      (t = new THREE.Scene()).add(o),
      (a = new THREE.CanvasRenderer()).setSize(r, s)
    var n = new THREE.ParticleBasicMaterial({ map: new THREE.Texture(l) })
    Array.apply(null, { length: E }).map(function() {
      var e = new Particle3D(n)
      ;(e.position.x = 2e3 * Math.random() - 1e3),
        (e.position.y = 2e3 * Math.random() - 1e3),
        (e.position.z = 2e3 * Math.random() - 1e3),
        (e.scale.x = e.scale.y = 1),
        t.add(e),
        p.push(e)
    }),
      i.appendChild(a.domElement),
      clearInterval(m),
      (m = setInterval(u, 1e3 / 60))
  }
  function u() {
    p.forEach(function(e) {
      e.updatePhysics()
      var n = e.position,
        i = n.x,
        o = n.y,
        t = n.z
      o < -1e3 && (e.position.y += 2e3),
        1e3 < i && (e.position.x -= 2e3),
        i < -1e3 && (e.position.x += 2e3),
        1e3 < t && (e.position.z -= 2e3),
        t < -1e3 && (e.position.z += 2e3)
    }),
      (o.position.x += 0.05 * (d - o.position.x)),
      (o.position.y += 0.05 * (-c - o.position.y)),
      o.lookAt(t.position),
      a.render(t, o)
  }
  ;(l.src = './img/snow.png'),
    h(),
    window.addEventListener('resize', function() {
      ;(r = n.innerWidth), (s = n.innerHeight), (p = []), i.remove(), (c = d = 0), h()
    })
})(document, window)
